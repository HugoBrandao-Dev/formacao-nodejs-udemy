<!-- Precisa voltar os diretórios para achar a pasta "partials" -->
<%- include ("../../partials/header.ejs") %>
	<body>
		<%- include ("../../partials/navbar.ejs") %>
		<div class="container">
			<br>
			<div class="card">
				<div class="card-header">
					<h2>Editar artigo</h2>
				</div>
				<div class="card-body">
					<form method="POST" action="/articles/update">
						<input type="hidden" name="ipt-id" value="<%= article.id %>">
						<label>Título:</label>
						<input
							type="text"
							class="form-control"
							name="ipt-title"
							placeholder="Defina o título do artigo"
							value="<%= article.title %>">
						<br>
						<textarea
							id="txt-article"
							name="txt-body"
							class="form-control"
							rows="15"
							placeholder="Escreva seu artigo aqui"><%- article.body %></textarea>
						<label>Categoria</label>
						<select name="slt-category" class="form-control">
							<% categories.forEach(category => { %>
								<% if (category.id === article.categoryId)  {%>
									<option value="<%= category.id %>" selected><%= category.title %></option>
								<% } else { %>
									<option value="<%= category.id %>"><%= category.title %></option>
								<% } %>
							<% }) %>
						</select>
						<br>
						<button class="btn btn-warning">Atualizar</button>
					</form>
				</div>
			</div>
		</div>
	</body>

<!-- Precisa voltar os diretórios para achar a pasta "partials" -->
<%- include ("../../partials/footer.ejs") %>

<!-- TinyMCE para edição de textos -->
<script src="/tinymce/tinymce.min.js"></script>
<script>
	tinymce.init({
		// Qual o ID do textarea que queremos que seja customizado pelo TinyMCE
		selector: "#txt-article",
		plugins: [
			"lists advlist autolink link image print preview hr searchreplace wordcount fullscreen insertdatetime media save table paste emoticons"
		],
		language: "pt_BR"
	})
</script>
